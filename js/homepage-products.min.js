!function(e){e(document).ready(function(){function t(){T=function(){var e,t=JSON.parse(localStorage.getItem("recipes")),n=!1;for(var a in t)t[a]||n||(e=t[e],n=!0),n||(e=a);return parseInt(e)}(),n(),function(){const t=e(".homepage-products").find('[data-id="search-products"]');t&&t.on("input",o);e("body").on("change","#num_meals",a),e("body").on("click",".card__button",l),e("body").on("click",".fab",c),e("body").on("click","[data-progress-step] a",d),e("body").on("click",".snackbar__button",h),e("body").on("click",'[placeholder-id="edit-recipe"]',f),e("#shopping-list").on("hide.bs.modal",function(t){e("#shopping-list").find(".ingredient__list-container").html("")}),e("body").on("click","[data-shoppinglist]",g),e("body").on("click","[data-shop]",u)}(),r(),i();var t=localStorage.getItem("kcal")||2500;GoatchefSingleton.dispatchEvent("updateKcal",t),e(".loader").addClass("hidden"),e(".homepage-products").removeClass("hidden")}function n(){j.each(function(t){t!==j.length-1&&e(j[t]).addClass("hidden")});for(var t=0;t<G;t++)e(j[t]).removeClass("hidden");_=e(".steps .steps__item.hidden").detach()}function a(){_.insertAfter(j[G-1]),G=e("#num_meals").val(),n(),i(),localStorage.setItem("numMeals",parseInt(e("#num_meals").val())),p()}function i(){var t=e(".progress-nutritions__item");e(t).addClass("hidden"),e(t[t.length-1]).removeClass("hidden");for(var n=0;n<G;n++)e(t[n]).removeClass("hidden")}function r(){var t=JSON.parse(localStorage.getItem("recipes"));for(var n in t)if(t[n]){var a=e("[data-recipe="+n+"-"+t[n]+"]");e(a).find(".fab").addClass("check")}}function s(){var t=e(".tab-content .loader");J?e(t).removeClass("hidden"):e(t).addClass("hidden")}function o(){J=!0,s();var t=e(this).parent().find(".homepage-products__list")[S],n=e(t).find(".card__image img");e(n).lazyLoadXT({show:!0});m(e(this).val()||""),K(t)}function d(t){r(),t.preventDefault();var n=e(t.currentTarget).parent().attr("data-progress-step");S=N.indexOf(n),n&&(N.map(function(t){e("#"+t).addClass("hidden"),e("[data-progress-step="+t+"]").removeClass("steps__item--active")}),e("#"+n).removeClass("hidden"),e("[data-progress-step="+n+"]").addClass("steps__item--active")),m(),v()}function l(){e(this).closest(".card").find(".card__detail").toggleClass("hidden")}function c(){e(".fab").removeClass("check"),e(this).addClass("check");var t=e(this).attr("data-id"),n=e(this).closest("[data-recipe]").attr("data-recipe").split("-")[0],a=JSON.parse(localStorage.getItem("recipes")),i=Object.assign({breakfast:"",lunch:"",diner:"",snack1:"",snack2:"",snack3:""},a,{[n]:t});localStorage.setItem("recipes",JSON.stringify(i)),GoatchefSingleton.setRecipes(i);var r=["breakfast","lunch","diner","snack1","snack2","snack3"].indexOf(n)+1===parseInt(G),s=C.find(function(e){return e.id===t}),o=r?".":". Kies nu jouw volgende maaltijd.",d="Goede keuze! Je hebt "+s.recipe_title+" gekozen als "+z[O][n]+o;const l=!localStorage.getItem("shouldDisplaySnackbar"),c=function(e,t,n){const a={nl:["Ander ","? Klik dan op "," in het menu en kies een nieuw ",". CalorieÃ«n en voedingswaarden inzien? Bekijk jouw voortgang hieronder en zie precies hoeveel jouw lichaam binnenkrijgt met de gekozen recepten.","Alles is gereed. Klik op aan de slag om verder te gaan."]};return n?a[O][0]+z[O][e]+a[O][1]+z[O][e]+a[O][2]+z[O][e]+a[O][3]:t?a[O][4]:""}(n,r,l);l&&localStorage.setItem("shouldDisplaySnackbar","true"),b?createSnackbar("Je hebt "+translation[n]+" gewijzigd","","Terug naar overzicht"):createSnackbar(d,c,r?"aan de slag":"volgende"),e(".progress-nutritions").removeClass("hidden");var u=e("[data-type="+n+"]");if(u){e(u).find('[placeholder-id="recipe_title"]').html(s.recipe_title),e(u).find('[placeholder-id="cook-time"]').html(s.cook_time),e(u).find('[placeholder-id="num-ingredients"]').html(s.ingredients.length),e(u).find('[placeholder-id="serving_size"]').html(s.serving_size),e(u).find('[placeholder-id="serving_size_unit"]').html(s.serving_unit),e(u).find('[placeholder-id="recipe_description"]').attr("src",s.description),e(u).find('[placeholder-id="recipe_image"]').attr("src",s.image);var g="";for(var f in s.nutrition)g+="<li>"+s.nutrition[f].name+" "+s.nutrition[f].value+" "+s.nutrition[f].unit+"</li>";e(u).find(".card__detail ul").html(g)}var h=s.nutrition.find(function(e){return"eiwit"===e.name}).value||0,v=s.nutrition.find(function(e){return"vet"===e.name}).value||0,_=s.nutrition.find(function(e){return"koolhydraten"===e.name}).value||0;GoatchefSingleton.setKcal({protein:parseInt(h),fat:parseInt(v),carbs:parseInt(_)},n),m(),function(){var t=JSON.parse(localStorage.getItem("recipes"));for(var n in t)t[n]&&(e("[data-progress-step="+n+"]").removeAttr("disabled").addClass("steps__item--done"),T=n)}(),p()}function p(){if(r(),b)return b=!1,j[j.length-1];var t=e(".steps__item--done").length;return e(j[t]).addClass("steps__item--active").removeAttr("disabled"),e(j[t])}function u(){window.open("https://www.ah.nl/","_blank")}function g(){e("#shopping-list").modal("toggle");var t=[],n=JSON.parse(localStorage.getItem("recipes"));Object.keys(n).forEach(function(e){if(n[e]){var a=C.find(function(t){return console.log(t.id,n[e]),t.id===n[e]});a&&t.push({mealType:e,ingredients:a.ingredients,servingSize:a.serving_size})}});var a=e("#shopping-list").find(".ingredient__list-container");0===e(a).children().length&&t.forEach(function(t){var n=e("<div>").addClass("ingredient__list"),i=e("<h3>"+translation[t.mealType]+"</h3>"),r=e("<ul>");t.ingredients.forEach(function(n){var a=n.quantity_unit?n.quantity_unit+" ":"",i=e("<li>"+n.quantity/t.servingSize+" "+a+n.ingredient_title+"</li>");r.append(i)}),e(n).append(i).append(r),e(a).append(n)})}function f(t){var n=e(t.target).closest(".progress-nutritions__item")[0];n&&(b=!0,n.dataset&&n.dataset.type&&function(t){if(t){var n=e("[data-progress-step="+t+"]").find("a.steps__link");n&&(e(n).trigger("click"),r())}}(n.dataset.type))}function h(){var t=p(),n=e(t).find("a.steps__link");e(n).trigger("click"),v()}function v(){var t=e(".steps__item--active").attr("data-progress-step");N.indexOf(t)>=parseInt(G)?e('[data-id="search-products"]').addClass("hidden"):e('[data-id="search-products"]').removeClass("hidden")}function m(t){t||(t="");var n=new RegExp(t,"i"),a=localStorage.getItem("kcal")||2500,i=localStorage.getItem("goal")||GoatchefSingleton.goal,r=GoatchefSingleton.calculateTotalKcal(GoatchefSingleton.user.kcal),s=(GoatchefSingleton.macros,GoatchefSingleton.macroMap[i],C.map(function(e){var t=e.ingredients.some(function(e){return n.test(e.ingredient_title)});if(!n.test(e.recipe_title)&&!t)return e.hidden=!0,e;e.hidden=!1;var i=a*y.calculateCarbsNeeded(),s=r.carbs,o=e.nutrition.find(function(e){return"koolhydraten"===e.name}),d=!1;o&&o.value&&(d=i-s-parseInt(o.value)<0);var l=r.protein,c=a*y.calculateProteinNeeded(),p=e.nutrition.find(function(e){return"eiwit"===e.name}),u=!1;p&&p.value&&(u=c-l-parseInt(p.value)<0);var g=r.fat,f=a*y.calculateFatNeeded(),h=e.nutrition.find(function(e){return"vet"===e.name}),v=!1;return h&&h.value&&(v=f-g-parseInt(h.value)<0),e.hidden=!!(u||v||d),e}));C=s;var o=e("body").find(".homepage-products__list")[S];K(o)}e.lazyLoadXT.scrollContainer=".homepage-products__list";let _,k,b=!1,S=0;const{user:y,recipes:C,getCurrentSelectedRecipes:I,getNumMeals:w,tabTranslation:z}=GoatchefSingleton,O="nl",j=(I(),e(".steps__item")),G=w(),N=["breakfast","lunch","diner","snack1","snack2","snack3","end"];var T,J=!1;localStorage.removeItem("shouldDisplaySnackbar"),t();var K=function(e,t,n){var a;return function(){var i=this,r=arguments,s=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(i,r)},t),s&&e.apply(i,r)}}(function(t){!function(t){var n=0;e(t).append(k),k=null;var a=e(t).parent().attr("id");Object.keys(C).map(function(t){var i=e("[data-recipe="+a+"-"+C[t].id+"]");C[t].hidden||n++,C[t].hidden?e(i).addClass("hidden"):e(i).removeClass("hidden")}),k=e(".card.hidden").detach(),e(t).parent().find(".homepage-products__empty"),J=!1,s()}(t)},300)})}(jQuery);