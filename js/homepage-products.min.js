!function(e){e(document).ready(function(){function t(){b=function(){var e,t=JSON.parse(localStorage.getItem("recipes")),n=!1;for(var a in t)t[a]||n||(e=t[e],n=!0),n||(e=a);return parseInt(e)}(),n(),C.on("input",o),e("body").on("change","#num_meals",a),e("body").on("click",".card__button",c),e("body").on("click",".fab",l),e("body").on("click","[data-progress-step] a",d),e("body").on("click",".snackbar__button",f),e("body").on("click",'[placeholder-id="edit-recipe"]',h),e("#shopping-list").on("hide.bs.modal",function(t){e("#shopping-list").find(".ingredient__list-container").html("")}),e("body").on("click","[data-shoppinglist]",g),e("body").on("click","[data-shop]",u),r(),i();var t=localStorage.getItem("kcal")||2500;N.dispatchEvent("updateKcal",t),e(".loader").addClass("hidden"),e(".homepage-products").removeClass("hidden")}function n(){w.each(function(t){t!==w.length-1&&e(w[t]).addClass("hidden")});for(var t=0;t<z;t++)e(w[t]).removeClass("hidden");_=e(".steps .steps__item.hidden").detach()}function a(){var t=e(".steps .steps__item");_.insertAfter(t[z-1]),z=e("#num_meals").val(),n(),i(),localStorage.setItem("numMeals",parseInt(e("#num_meals").val())),p()}function i(){var t=e(".progress-nutritions__item");e(t).addClass("hidden"),e(t[t.length-1]).removeClass("hidden");for(var n=0;n<z;n++)e(t[n]).removeClass("hidden")}function r(){var t=JSON.parse(localStorage.getItem("recipes"));for(var n in t)if(t[n]){var a=e("[data-recipe="+n+"-"+t[n]+"]");e(a).find(".fab").addClass("check")}}function s(){var t=e(".tab-content .loader");J?e(t).removeClass("hidden"):e(t).addClass("hidden")}function o(){J=!0,s();var t=e(this).parent().find(".homepage-products__list")[I],n=e(t).find(".card__image img");e(n).lazyLoadXT({show:!0});m(e(this).val()||""),G(t)}function d(t){r(),t.preventDefault();var n=e(t.currentTarget).parent().attr("data-progress-step");I=j.indexOf(n),n&&(j.map(function(t){e("#"+t).addClass("hidden"),e("[data-progress-step="+t+"]").removeClass("steps__item--active")}),e("#"+n).removeClass("hidden"),e("[data-progress-step="+n+"]").addClass("steps__item--active")),m(),v()}function c(){e(this).closest(".card").find(".card__detail").toggleClass("hidden")}function l(){e(".fab").removeClass("check"),e(this).addClass("check");var t=e(this).attr("data-id"),n=e(this).closest("[data-recipe]").attr("data-recipe").split("-")[0],a=JSON.parse(localStorage.getItem("recipes")),i=Object.assign({breakfast:"",lunch:"",diner:"",snack1:"",snack2:"",snack3:""},a,{[n]:t});localStorage.setItem("recipes",JSON.stringify(i)),N.setRecipes(i);var r=["breakfast","lunch","diner","snack1","snack2","snack3"].indexOf(n)+1===parseInt(z),s=y.find(function(e){return e.id===t}),o=r?".":". Kies nu jouw volgende maaltijd.",d="Goede keuze! Je hebt "+s.recipe_title+" gekozen als "+T[n]+o,c="";!localStorage.getItem("shouldDisplaySnackbar")?(c="Ander "+T[n]+"? Klik dan op "+T[n]+" in het menu en kies een nieuw "+T[n]+". CalorieÃ«n en voedingswaarden inzien? Bekijk jouw voortgang hieronder en zie precies hoeveel jouw lichaam binnenkrijgt met de gekozen recepten.",localStorage.setItem("shouldDisplaySnackbar","true")):c=r?"Alles is gereed. Klik op aan de slag om verder te gaan.":"",O?createSnackbar("Je hebt "+T[n]+" gewijzigd","","Terug naar overzicht"):createSnackbar(d,c,r?"aan de slag":"volgende"),e(".progress-nutritions").removeClass("hidden");var l=e("[data-type="+n+"]");if(l){e(l).find('[placeholder-id="recipe_title"]').html(s.recipe_title),e(l).find('[placeholder-id="cook-time"]').html(s.cook_time),e(l).find('[placeholder-id="num-ingredients"]').html(s.ingredients.length),e(l).find('[placeholder-id="serving_size"]').html(s.serving_size),e(l).find('[placeholder-id="serving_size_unit"]').html(s.serving_unit),e(l).find('[placeholder-id="recipe_description"]').attr("src",s.description),e(l).find('[placeholder-id="recipe_image"]').attr("src",s.image);var u="";for(var g in s.nutrition)u+="<li>"+s.nutrition[g].name+" "+s.nutrition[g].value+" "+s.nutrition[g].unit+"</li>";e(l).find(".card__detail ul").html(u)}var h=s.nutrition.find(function(e){return"eiwit"===e.name}).value||0,f=s.nutrition.find(function(e){return"vet"===e.name}).value||0,v=s.nutrition.find(function(e){return"koolhydraten"===e.name}).value||0;N.setKcal({protein:parseInt(h),fat:parseInt(f),carbs:parseInt(v)},n),m(),function(){var t=JSON.parse(localStorage.getItem("recipes"));for(var n in t)t[n]&&(e("[data-progress-step="+n+"]").removeAttr("disabled").addClass("steps__item--done"),b=n)}(),p()}function p(){var t=e(".steps__item");if(r(),O)return O=!1,t[t.length-1];var n=e(".steps__item--done").length;return e(t[n]).addClass("steps__item--active").removeAttr("disabled"),e(t[n])}function u(){window.open("https://www.ah.nl/","_blank")}function g(){e("#shopping-list").modal("toggle");var t=[],n=JSON.parse(localStorage.getItem("recipes"));Object.keys(n).forEach(function(e){if(n[e]){var a=y.find(function(t){return console.log(t.id,n[e]),t.id===n[e]});a&&t.push({mealType:e,ingredients:a.ingredients,servingSize:a.serving_size})}});var a=e("#shopping-list").find(".ingredient__list-container");0===e(a).children().length&&t.forEach(function(t){var n=e("<div>").addClass("ingredient__list"),i=e("<h3>"+T[t.mealType]+"</h3>"),r=e("<ul>");t.ingredients.forEach(function(n){var a=n.quantity_unit?n.quantity_unit+" ":"",i=e("<li>"+n.quantity/t.servingSize+" "+a+n.ingredient_title+"</li>");r.append(i)}),e(n).append(i).append(r),e(a).append(n)})}function h(t){var n=e(t.target).closest(".progress-nutritions__item")[0];n&&(O=!0,n.dataset&&n.dataset.type&&function(t){if(t){var n=e("[data-progress-step="+t+"]").find("a.steps__link");n&&(e(n).trigger("click"),r())}}(n.dataset.type))}function f(){var t=p(),n=e(t).find("a.steps__link");e(n).trigger("click"),v()}function v(){var t=e(".steps__item--active").attr("data-progress-step");j.indexOf(t)>=parseInt(z)?e('[data-id="search-products"]').addClass("hidden"):e('[data-id="search-products"]').removeClass("hidden")}function m(t){t||(t="");var n=new RegExp(t,"i"),a=localStorage.getItem("kcal")||2500,i=localStorage.getItem("goal")||GoatchefSingleton.goal,r=GoatchefSingleton.calculateTotalKcal(GoatchefSingleton.user.kcal),s=(GoatchefSingleton.macros,GoatchefSingleton.macroMap[i],y.map(function(e){var t=e.ingredients.some(function(e){return n.test(e.ingredient_title)});if(!n.test(e.recipe_title)&&!t)return e.hidden=!0,e;e.hidden=!1;var i=a*S.calculateCarbsNeeded(),s=r.carbs,o=e.nutrition.find(function(e){return"koolhydraten"===e.name}),d=!1;o&&o.value&&(d=i-s-parseInt(o.value)<0);var c=r.protein,l=a*S.calculateProteinNeeded(),p=e.nutrition.find(function(e){return"eiwit"===e.name}),u=!1;p&&p.value&&(u=l-c-parseInt(p.value)<0);var g=r.fat,h=a*S.calculateFatNeeded(),f=e.nutrition.find(function(e){return"vet"===e.name}),v=!1;return f&&f.value&&(v=h-g-parseInt(f.value)<0),e.hidden=!!(u||v||d),e}));y=s;var o=e("body").find(".homepage-products__list")[I];G(o)}e.lazyLoadXT.scrollContainer=".homepage-products__list";var _,k,b,S=GoatchefSingleton.user,y=JSON.parse(gcProducts.recipes),C=(y.slice(0,y.length),e(".homepage-products__list"),e(".homepage-products").find('[data-id="search-products"]')),I=0,w=(JSON.parse(localStorage.getItem("recipes")),e(".progress-nutritions__item"),e(".steps__item")),z=e("#num_meals").val(),O=!1,j=["breakfast","lunch","diner","snack1","snack2","snack3","end"],N=GoatchefSingleton,J=!1;localStorage.removeItem("shouldDisplaySnackbar");var T={breakfast:"ontbijt",lunch:"lunch",diner:"avondeten",snack1:"snack",snack2:"2e Snack",snack3:"3e Snack"};t();var G=function(e,t,n){var a;return function(){var i=this,r=arguments,s=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(i,r)},t),s&&e.apply(i,r)}}(function(t){!function(t){var n=0;e(t).append(k),k=null;var a=e(t).parent().attr("id");Object.keys(y).map(function(t){var i=e("[data-recipe="+a+"-"+y[t].id+"]");y[t].hidden||n++,y[t].hidden?e(i).addClass("hidden"):e(i).removeClass("hidden")}),k=e(".card.hidden").detach(),e(t).parent().find(".homepage-products__empty"),J=!1,s()}(t)},300)})}(jQuery);