!function(a){a(document).ready(function(){function t(){var t=a(this).val();localStorage.setItem("kcal",t),GoatchefSingleton.dispatchEvent("updateTotalKcal",t)}function e(){var t=parseInt(a("#age").val())||0,e=parseInt(a("#length").val())||0,o=parseFloat(a("#weight").val())||0,c=0;switch(a("#gender .selected").data("gender")){case"male":c=l(n=88.362+13.397*o+4.799*e-5.677*t);break;case"female":var n=447.593+9.247*o+3.098*e-4.33*t;c=l(n)}t&&e&&o&&(a("#total-calories").val(c),localStorage.setItem("kcal",c),GoatchefSingleton.dispatchEvent("updateTotalKcal",c))}function l(t){var e=parseInt(a("#goal").val()),l=parseFloat(a("#workSelect").val()),o=parseFloat(a("#sportSelect").val());return-1!==l&&-1===o&&-1!==e?Math.round(t*l+e):-1===l&&-1!==o&&-1!==e?Math.round(t*o+e):-1!==l&&-1!==o&&-1!==e?Math.round(t*((l+o)/2)+e):Math.round(t)}var o=a("#homepage-calculator"),c=!isNaN(localStorage.getItem("kcal"))&&JSON.parse(localStorage.getItem("kcal"))||2500,n=JSON.parse(localStorage.getItem("numMeals"));c>0&&a("#num_cal").val(c),n>0&&n<6&&a("#num_meals").val(n),a(o).parent().parent().css({position:"static"}).parent().css({position:"static"}).parent().css({position:"static"}).parent().css({position:"static"}),a("#homepage-calculator .btn-primary").click(function(){var t,l;a(this).addClass("selected"),l=a(this).parent().attr("id"),t=a("#"+l).children();for(var o=0;o<t.length;o++)this.textContent!=t[o].textContent&&a("#"+t[o].id).removeClass("selected");e()}),a("#homepage-calculator input").on("input",e),a("#num_cal").on("change",t),a("#num_cal").on("input",t),a("#homepage-calculator select").on("change",e),a("#add-kcal").click(function(){a("#num_cal").val(a("#total-calories").val()),localStorage.setItem("kcal",a("#total-calories").val()),localStorage.setItem("goal",a("#goal").val()),a("#homepage-calculator").modal("toggle")})})}(jQuery);